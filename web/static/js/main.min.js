!function(r){r(function(){r(".button-collapse").sideNav(),r.validator.addMethod("notempty",function(r,a){return this.optional(a)||/\S/.test(r)},"Пожалуйста, укажите не пустое значение");var a={validate:{validClass:"valid",errorClass:"invalid"}},e={disable:function(a){var e=r(a);e.find("[data-progress]").css("visibility","visible"),e.find(":submit").prop("disabled",!0),e.find(':input:not([readonly="readonly"])').attr("data-ajax-submit","progress").prop("readonly",!0)},enable:function(a){var e=r(a);e.find(":submit").prop("disabled",!1),e.find("[data-progress]").css("visibility","hidden"),e.find(':input[data-ajax-submit="progress"]').attr("data-ajax-submit","").prop("readonly",!1)},populate:function(a,e){var o=r(a);r.each(e,function(r,a){o.find('[name="'+r+'"]').val(a)})},showErrors:function(a,e){var o=r(a).validate(),t={};r.each(e,function(a,e){r.isArray(e)&&(t[a]=e.join("<br>"))}),o.showErrors(t)}};r(document).ajaxError(function(r,a,e,o){0===a.status?console.log("status === 0",r,a,e,o):404==a.status?console.log(404,r,a,e,o):503==a.status?console.log(503,r,a,e,o):"parsererror"===o?console.log("parsererror",r,a,e,o):"timeout"===o?console.log("timeout",r,a,e,o):"abort"===o?console.log("abort",r,a,e,o):console.log("uncaught exception",r,a,e,o)});var o=r("#order-form");if(o.length){var t=r("#nav-user-info"),n={avatar:t.data("avatar"),username:t.data("username")},i=r("#created-orders"),s=Handlebars.compile(r("#created-orders-new").html());o.validate(r.extend({},a.validate,{rules:{description:{notempty:{}}},submitHandler:function(a){var o=r(a);o.ajaxSubmit({beforeSubmit:function(){e.disable(a)}}).data("jqxhr").done(function(o,t,d){if(console.log(o),o.createdOrder&&!r.isEmptyObject(o.createdOrder)){Materialize.toast("Заказ на сумму "+o.createdOrder.price_dollar+" успешно добавлен",6e3);var l=s({customer:n,order:o.createdOrder});i.prepend(l)}o.order&&e.populate(a,o.order),o.errors&&e.showErrors(a,o.errors)}).always(function(r,o){e.enable(a)})}}))}})}(jQuery);